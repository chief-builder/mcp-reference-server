<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Custom Tool Example | MCP Reference Server</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Custom Tool Example" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A learning project implementing the Model Context Protocol (MCP) 2025-11-25 specification" />
<meta property="og:description" content="A learning project implementing the Model Context Protocol (MCP) 2025-11-25 specification" />
<link rel="canonical" href="http://localhost:4000/examples/custom-tool.html" />
<meta property="og:url" content="http://localhost:4000/examples/custom-tool.html" />
<meta property="og:site_name" content="MCP Reference Server" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Custom Tool Example" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"A learning project implementing the Model Context Protocol (MCP) 2025-11-25 specification","headline":"Custom Tool Example","url":"http://localhost:4000/examples/custom-tool.html"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=4084654cb939e8940665a91c4c56b28d8f437143">
    <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1><a href="http://localhost:4000/">MCP Reference Server</a></h1>

        

        <p>A learning project implementing the Model Context Protocol (MCP) 2025-11-25 specification</p>

        
        <p class="view"><a href="https://github.com/chiefbuilder/mcp-reference-server">View the Project on GitHub <small>chiefbuilder/mcp-reference-server</small></a></p>
        

        

        
      </header>
      <section>

      <h1 id="custom-tool-example">Custom Tool Example</h1>

<p>Building advanced tools with schemas, validation, and rich content.</p>

<h2 id="basic-tool">Basic Tool</h2>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">server</span><span class="p">.</span><span class="nx">tool</span><span class="p">(</span>
  <span class="dl">'</span><span class="s1">greet</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">Greet someone by name</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">object</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">name</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">,</span> <span class="na">description</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Name to greet</span><span class="dl">'</span> <span class="p">},</span>
    <span class="p">},</span>
    <span class="na">required</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">name</span><span class="dl">'</span><span class="p">],</span>
  <span class="p">},</span>
  <span class="k">async</span> <span class="p">({</span> <span class="nx">name</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">({</span>
    <span class="na">content</span><span class="p">:</span> <span class="p">[{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">text</span><span class="dl">'</span><span class="p">,</span> <span class="na">text</span><span class="p">:</span> <span class="s2">`Hello, </span><span class="p">${</span><span class="nx">name</span><span class="p">}</span><span class="s2">!`</span> <span class="p">}],</span>
  <span class="p">})</span>
<span class="p">);</span>
</code></pre></div></div>

<h2 id="tool-with-annotations">Tool with Annotations</h2>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">server</span><span class="p">.</span><span class="nx">tool</span><span class="p">(</span>
  <span class="dl">'</span><span class="s1">delete_file</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">Delete a file from the filesystem</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">object</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">path</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">,</span> <span class="na">description</span><span class="p">:</span> <span class="dl">'</span><span class="s1">File path to delete</span><span class="dl">'</span> <span class="p">},</span>
      <span class="na">force</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">boolean</span><span class="dl">'</span><span class="p">,</span> <span class="na">default</span><span class="p">:</span> <span class="kc">false</span> <span class="p">},</span>
    <span class="p">},</span>
    <span class="na">required</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">path</span><span class="dl">'</span><span class="p">],</span>
  <span class="p">},</span>
  <span class="k">async</span> <span class="p">({</span> <span class="nx">path</span><span class="p">,</span> <span class="nx">force</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">fs</span> <span class="o">=</span> <span class="k">await</span> <span class="k">import</span><span class="p">(</span><span class="dl">'</span><span class="s1">fs/promises</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">await</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">rm</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="p">{</span> <span class="nx">force</span> <span class="p">});</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">content</span><span class="p">:</span> <span class="p">[{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">text</span><span class="dl">'</span><span class="p">,</span> <span class="na">text</span><span class="p">:</span> <span class="s2">`Deleted: </span><span class="p">${</span><span class="nx">path</span><span class="p">}</span><span class="s2">`</span> <span class="p">}],</span>
    <span class="p">};</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="na">title</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Delete File</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">annotations</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">destructiveHint</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>   <span class="c1">// May delete data</span>
      <span class="na">idempotentHint</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>   <span class="c1">// Not safe to retry</span>
    <span class="p">},</span>
  <span class="p">}</span>
<span class="p">);</span>
</code></pre></div></div>

<h2 id="tool-with-complex-schema">Tool with Complex Schema</h2>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">server</span><span class="p">.</span><span class="nx">tool</span><span class="p">(</span>
  <span class="dl">'</span><span class="s1">search</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">Search for items with filters</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">object</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">query</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">description</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Search query</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">minLength</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="na">maxLength</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="na">filters</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">object</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">category</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">enum</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">documents</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">images</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">videos</span><span class="dl">'</span><span class="p">],</span>
          <span class="p">},</span>
          <span class="na">dateRange</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">object</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
              <span class="na">start</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">,</span> <span class="na">format</span><span class="p">:</span> <span class="dl">'</span><span class="s1">date</span><span class="dl">'</span> <span class="p">},</span>
              <span class="na">end</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">,</span> <span class="na">format</span><span class="p">:</span> <span class="dl">'</span><span class="s1">date</span><span class="dl">'</span> <span class="p">},</span>
            <span class="p">},</span>
          <span class="p">},</span>
          <span class="na">tags</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">array</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">items</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span> <span class="p">},</span>
            <span class="na">maxItems</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
          <span class="p">},</span>
        <span class="p">},</span>
      <span class="p">},</span>
      <span class="na">limit</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">number</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">minimum</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="na">maximum</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
        <span class="na">default</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="na">offset</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">number</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">minimum</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="na">default</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="p">},</span>
    <span class="p">},</span>
    <span class="na">required</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">query</span><span class="dl">'</span><span class="p">],</span>
  <span class="p">},</span>
  <span class="k">async</span> <span class="p">({</span> <span class="nx">query</span><span class="p">,</span> <span class="nx">filters</span><span class="p">,</span> <span class="nx">limit</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="nx">offset</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">results</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">searchService</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="p">{</span> <span class="nx">filters</span><span class="p">,</span> <span class="nx">limit</span><span class="p">,</span> <span class="nx">offset</span> <span class="p">});</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">content</span><span class="p">:</span> <span class="p">[{</span>
        <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">text</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">text</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">results</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
      <span class="p">}],</span>
    <span class="p">};</span>
  <span class="p">}</span>
<span class="p">);</span>
</code></pre></div></div>

<h2 id="tool-returning-multiple-content-types">Tool Returning Multiple Content Types</h2>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">server</span><span class="p">.</span><span class="nx">tool</span><span class="p">(</span>
  <span class="dl">'</span><span class="s1">analyze_image</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">Analyze an image and return results</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">object</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">url</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">,</span> <span class="na">format</span><span class="p">:</span> <span class="dl">'</span><span class="s1">uri</span><span class="dl">'</span> <span class="p">},</span>
    <span class="p">},</span>
    <span class="na">required</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">url</span><span class="dl">'</span><span class="p">],</span>
  <span class="p">},</span>
  <span class="k">async</span> <span class="p">({</span> <span class="nx">url</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">analysis</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">imageService</span><span class="p">.</span><span class="nx">analyze</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">thumbnail</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">imageService</span><span class="p">.</span><span class="nx">thumbnail</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>

    <span class="k">return</span> <span class="p">{</span>
      <span class="na">content</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">text</span><span class="dl">'</span><span class="p">,</span>
          <span class="na">text</span><span class="p">:</span> <span class="s2">`Analysis Results:\n</span><span class="p">${</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">analysis</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">2</span><span class="p">)}</span><span class="s2">`</span><span class="p">,</span>
          <span class="na">annotations</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">audience</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">assistant</span><span class="dl">'</span><span class="p">],</span>
            <span class="na">priority</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">,</span>
          <span class="p">},</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">image</span><span class="dl">'</span><span class="p">,</span>
          <span class="na">data</span><span class="p">:</span> <span class="nx">thumbnail</span><span class="p">.</span><span class="nx">base64</span><span class="p">,</span>
          <span class="na">mimeType</span><span class="p">:</span> <span class="dl">'</span><span class="s1">image/jpeg</span><span class="dl">'</span><span class="p">,</span>
          <span class="na">annotations</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">audience</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">user</span><span class="dl">'</span><span class="p">],</span>
            <span class="na">priority</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
          <span class="p">},</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">text</span><span class="dl">'</span><span class="p">,</span>
          <span class="na">text</span><span class="p">:</span> <span class="s2">`Found </span><span class="p">${</span><span class="nx">analysis</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span><span class="s2"> objects in image`</span><span class="p">,</span>
          <span class="na">annotations</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">audience</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">user</span><span class="dl">'</span><span class="p">],</span>
            <span class="na">priority</span><span class="p">:</span> <span class="mf">0.9</span><span class="p">,</span>
          <span class="p">},</span>
        <span class="p">},</span>
      <span class="p">],</span>
    <span class="p">};</span>
  <span class="p">}</span>
<span class="p">);</span>
</code></pre></div></div>

<h2 id="tool-with-error-handling">Tool with Error Handling</h2>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">server</span><span class="p">.</span><span class="nx">tool</span><span class="p">(</span>
  <span class="dl">'</span><span class="s1">execute_query</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">Execute a database query</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">object</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">sql</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">,</span> <span class="na">description</span><span class="p">:</span> <span class="dl">'</span><span class="s1">SQL query to execute</span><span class="dl">'</span> <span class="p">},</span>
    <span class="p">},</span>
    <span class="na">required</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">sql</span><span class="dl">'</span><span class="p">],</span>
  <span class="p">},</span>
  <span class="k">async</span> <span class="p">({</span> <span class="nx">sql</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="c1">// Validate query</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">sql</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">includes</span><span class="p">(</span><span class="dl">'</span><span class="s1">drop</span><span class="dl">'</span><span class="p">)</span> <span class="o">||</span> <span class="nx">sql</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">includes</span><span class="p">(</span><span class="dl">'</span><span class="s1">delete</span><span class="dl">'</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">{</span>
          <span class="na">content</span><span class="p">:</span> <span class="p">[{</span>
            <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">text</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">text</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Destructive queries are not allowed</span><span class="dl">'</span><span class="p">,</span>
          <span class="p">}],</span>
          <span class="na">isError</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="p">};</span>
      <span class="p">}</span>

      <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">database</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="nx">sql</span><span class="p">);</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="na">content</span><span class="p">:</span> <span class="p">[{</span>
          <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">text</span><span class="dl">'</span><span class="p">,</span>
          <span class="na">text</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">rows</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
        <span class="p">}],</span>
      <span class="p">};</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="na">content</span><span class="p">:</span> <span class="p">[{</span>
          <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">text</span><span class="dl">'</span><span class="p">,</span>
          <span class="na">text</span><span class="p">:</span> <span class="s2">`Query failed: </span><span class="p">${</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
        <span class="p">}],</span>
        <span class="na">isError</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="p">};</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="na">annotations</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">readOnlyHint</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">}</span>
<span class="p">);</span>
</code></pre></div></div>

<h2 id="tool-with-completions">Tool with Completions</h2>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">CompletionHandler</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">mcp-reference-server</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">completions</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CompletionHandler</span><span class="p">();</span>

<span class="c1">// Register tool</span>
<span class="nx">server</span><span class="p">.</span><span class="nx">tool</span><span class="p">(</span>
  <span class="dl">'</span><span class="s1">set_config</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">Set a configuration value</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">object</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">key</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span> <span class="p">},</span>
      <span class="na">value</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span> <span class="p">},</span>
    <span class="p">},</span>
    <span class="na">required</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">key</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">value</span><span class="dl">'</span><span class="p">],</span>
  <span class="p">},</span>
  <span class="k">async</span> <span class="p">({</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">config</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">content</span><span class="p">:</span> <span class="p">[{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">text</span><span class="dl">'</span><span class="p">,</span> <span class="na">text</span><span class="p">:</span> <span class="s2">`Set </span><span class="p">${</span><span class="nx">key</span><span class="p">}</span><span class="s2"> = </span><span class="p">${</span><span class="nx">value</span><span class="p">}</span><span class="s2">`</span> <span class="p">}],</span>
    <span class="p">};</span>
  <span class="p">}</span>
<span class="p">);</span>

<span class="c1">// Register completions for the key argument</span>
<span class="nx">completions</span><span class="p">.</span><span class="nx">registerArgumentProvider</span><span class="p">(</span><span class="dl">'</span><span class="s1">set_config</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">key</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="p">(</span><span class="nx">prefix</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">keys</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">config</span><span class="p">.</span><span class="nx">listKeys</span><span class="p">();</span>
  <span class="k">return</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">k</span> <span class="o">=&gt;</span> <span class="nx">k</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">startsWith</span><span class="p">(</span><span class="nx">prefix</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()));</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="tool-with-output-schema">Tool with Output Schema</h2>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">server</span><span class="p">.</span><span class="nx">tool</span><span class="p">(</span>
  <span class="dl">'</span><span class="s1">get_user</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">Get user information by ID</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">object</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span> <span class="p">},</span>
    <span class="p">},</span>
    <span class="na">required</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">id</span><span class="dl">'</span><span class="p">],</span>
  <span class="p">},</span>
  <span class="k">async</span> <span class="p">({</span> <span class="nx">id</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">userService</span><span class="p">.</span><span class="nx">getById</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">content</span><span class="p">:</span> <span class="p">[{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">text</span><span class="dl">'</span><span class="p">,</span> <span class="na">text</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">}],</span>
      <span class="na">structuredContent</span><span class="p">:</span> <span class="nx">user</span><span class="p">,</span>
    <span class="p">};</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="na">outputSchema</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">object</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">id</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span> <span class="p">},</span>
        <span class="na">name</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span> <span class="p">},</span>
        <span class="na">email</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">,</span> <span class="na">format</span><span class="p">:</span> <span class="dl">'</span><span class="s1">email</span><span class="dl">'</span> <span class="p">},</span>
        <span class="na">role</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">,</span> <span class="na">enum</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">admin</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">user</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">guest</span><span class="dl">'</span><span class="p">]</span> <span class="p">},</span>
      <span class="p">},</span>
    <span class="p">},</span>
  <span class="p">}</span>
<span class="p">);</span>
</code></pre></div></div>

<h2 id="using-toolregistry-directly">Using ToolRegistry Directly</h2>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">ToolRegistry</span><span class="p">,</span> <span class="nx">ToolExecutor</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">mcp-reference-server</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">registry</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ToolRegistry</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">executor</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ToolExecutor</span><span class="p">(</span><span class="nx">registry</span><span class="p">);</span>

<span class="nx">registry</span><span class="p">.</span><span class="nx">registerTool</span><span class="p">({</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">calculate</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">description</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Perform a calculation</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">inputSchema</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">object</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">expression</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span> <span class="p">},</span>
    <span class="p">},</span>
    <span class="na">required</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">expression</span><span class="dl">'</span><span class="p">],</span>
  <span class="p">},</span>
  <span class="na">handler</span><span class="p">:</span> <span class="k">async</span> <span class="p">({</span> <span class="nx">expression</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="nx">expression</span><span class="p">);</span> <span class="c1">// Use a safe math parser in production</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">content</span><span class="p">:</span> <span class="p">[{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">text</span><span class="dl">'</span><span class="p">,</span> <span class="na">text</span><span class="p">:</span> <span class="nb">String</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">}],</span>
    <span class="p">};</span>
  <span class="p">},</span>
<span class="p">});</span>

<span class="c1">// Listen for changes</span>
<span class="nx">registry</span><span class="p">.</span><span class="nx">onToolsChanged</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Tool count: </span><span class="p">${</span><span class="nx">registry</span><span class="p">.</span><span class="nx">getToolCount</span><span class="p">()}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// Execute tool</span>
<span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">executor</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="dl">'</span><span class="s1">calculate</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">expression</span><span class="p">:</span> <span class="dl">'</span><span class="s1">2 + 2</span><span class="dl">'</span> <span class="p">});</span>
</code></pre></div></div>

<h2 id="related">Related</h2>

<ul>
  <li><a href="../guides/tools">Tools Guide</a> - Tool concepts</li>
  <li><a href="../guides/completions">Completions Guide</a> - Argument completion</li>
  <li><a href="../api/tools">API Reference</a> - Tools API</li>
</ul>


<hr>

<div class="nav-footer">
  <p><strong>Navigation:</strong>
    <a href="/">Home</a> |
    <a href="/getting-started/installation">Getting Started</a> |
    <a href="/guides/protocol">Guides</a> |
    <a href="/api/protocol">API Reference</a> |
    <a href="/examples/stdio-server">Examples</a> |
    <a href="/reference/environment">Reference</a>
  </p>
</div>



      </section>
      <footer>
        
        <p>This project is maintained by <a href="https://github.com/chiefbuilder">chiefbuilder</a></p>
        
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="/assets/js/scale.fix.js"></script>
  </body>
</html>
